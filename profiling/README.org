#+TITLE: Data transfer overhead and latency profiling
#+STARTUP: latexpreview

* Experiments
** Default config
*** Console output
#+begin_example
   Moving Window strategy
   Double precision
   Image size 2048x2048
   GCF size 32x32
   1 polarizations
   400000 visibilities
   Subgrid: 1/8



Computing on GPU...
==5951== NVPROF is profiling process 5951, command: ../grid
memcpy time: 1.10461 ms.
Processed 400000 complex points in 56.8012 ms.
57.6889 Gflops
Computing on CPU...
CPU execution time: 7021.66 ms.
Checking results against CPU:
==5951== Generated result file: /home/arunkmv/Projects/gpu-gridding-benchmark/SKA-gpu-grid/profiling/default.nvvp
======== Profiling result:
            Type  Time(%)      Time     Calls       Avg       Min       Max  Name
 GPU activities:   89.23%  56.800ms         1  56.800ms  56.800ms  56.800ms  void grid_kernel_window<int=32, double2, double2>(double2*, int2*, double2*, unsigned long, int, double2*)
                    8.53%  5.4323ms         1  5.4323ms  5.4323ms  5.4323ms  [CUDA memcpy DtoH]
                    1.67%  1.0617ms         3  353.91us  82.594us  489.90us  [CUDA memcpy HtoD]
                    0.57%  361.07us         1  361.07us  361.07us  361.07us  void vis2ints<double2>(double2*, int2*, int)
                    0.00%  1.1840us         1  1.1840us  1.1840us  1.1840us  [CUDA memset]
      API calls:   58.44%  107.49ms         2  53.744ms     637ns  107.49ms  cudaEventCreate
                   31.40%  57.745ms         2  28.873ms  6.2310us  57.739ms  cudaEventSynchronize
                    5.30%  9.7414ms         4  2.4354ms  198.24us  8.7278ms  cudaHostRegister
                    3.56%  6.5440ms         4  1.6360ms  102.32us  5.4454ms  cudaMemcpy
                    0.77%  1.4105ms         4  352.63us  124.26us  932.23us  cudaHostUnregister
                    0.29%  539.70us         5  107.94us  87.632us  159.90us  cudaMalloc
                    0.08%  153.88us        97  1.5860us      98ns  67.852us  cuDeviceGetAttribute
                    0.06%  106.51us         1  106.51us  106.51us  106.51us  cudaFree
                    0.05%  93.981us         1  93.981us  93.981us  93.981us  cuDeviceTotalMem
                    0.02%  39.003us         1  39.003us  39.003us  39.003us  cuDeviceGetName
                    0.02%  29.117us         2  14.558us  5.1650us  23.952us  cudaLaunchKernel
                    0.01%  13.704us         4  3.4260us  1.2060us  9.1220us  cudaEventRecord
                    0.01%  10.766us         1  10.766us  10.766us  10.766us  cudaMemset
                    0.00%  5.3420us         1  5.3420us  5.3420us  5.3420us  cuDeviceGetPCIBusId
                    0.00%  2.1190us         2  1.0590us     969ns  1.1500us  cudaEventElapsedTime
                    0.00%  1.6160us         3     538ns     127ns  1.3610us  cuDeviceGetCount
                    0.00%  1.4170us         8     177ns      76ns     367ns  cudaGetLastError
                    0.00%  1.3810us         2     690ns     323ns  1.0580us  cudaEventDestroy
                    0.00%     627ns         2     313ns     118ns     509ns  cuDeviceGet
                    0.00%     166ns         1     166ns     166ns     166ns  cuDeviceGetUuid
#+end_example

*** nvvp
HtoD: 13.849MB in 1.06172ms,
DtoH: 69.207MB in 5.4323ms

*** Runs
|      | Cuda event time memcpy (ms) | Profiler time H2D (ms) | CPU execution time (s) |
|------+-----------------------------+------------------------+------------------------|
|    1 |                     1.10461 |                1.06172 |                7.02166 |
|    2 |                     1.10214 |                 1.0586 |            7.202221227 |
|    3 |                     1.14467 |                 1.1010 |            6.840616962 |
|------+-----------------------------+------------------------+------------------------|
| Mean |                     1.11714 |              1.0737733 |              7.0214994 |
#+TBLFM: @5$4=vmean(@2$4..@4$4)::@5$3=vmean(@2$3..@4$3)::@5$2=vmean(@2$2..@4$2)

** config 1
*** Console output
#+begin_example
   Moving Window strategy
   Double precision
   Image size 2048x2048
   GCF size 64x64
   1 polarizations
   800000 visibilities
   Subgrid: 1/8



Computing on GPU...
==6108== NVPROF is profiling process 6108, command: ../grid
memcpy time: 2.32048 ms.
Processed 800000 complex points in 453.022 ms.
57.8656 Gflops
Computing on CPU...
CPU execution time: 52147.5 ms.
Checking results against CPU:
==6108== Generated result file: /home/arunkmv/Projects/gpu-gridding-benchmark/SKA-gpu-grid/profiling/config_1.nvvp
======== Profiling result:
            Type  Time(%)      Time     Calls       Avg       Min       Max  Name
 GPU activities:   98.17%  453.03ms         1  453.03ms  453.03ms  453.03ms  void grid_kernel_window<int=64, double2, double2>(double2*, int2*, double2*, unsigned long, int, double2*)
                    1.18%  5.4570ms         1  5.4570ms  5.4570ms  5.4570ms  [CUDA memcpy DtoH]
                    0.49%  2.2745ms         3  758.16us  322.50us  976.12us  [CUDA memcpy HtoD]
                    0.16%  718.77us         1  718.77us  718.77us  718.77us  void vis2ints<double2>(double2*, int2*, int)
                    0.00%  1.1840us         1  1.1840us  1.1840us  1.1840us  [CUDA memset]
      API calls:   76.42%  454.34ms         2  227.17ms  6.1290us  454.34ms  cudaEventSynchronize
                   19.98%  118.77ms         2  59.386ms     716ns  118.77ms  cudaEventCreate
                    1.83%  10.869ms         4  2.7174ms  488.03us  9.1089ms  cudaHostRegister
                    1.31%  7.7859ms         4  1.9465ms  344.06us  5.4720ms  cudaMemcpy
                    0.28%  1.6614ms         4  415.36us  186.07us  944.25us  cudaHostUnregister
                    0.10%  571.54us         5  114.31us  86.487us  170.17us  cudaMalloc
                    0.03%  186.84us        97  1.9260us     124ns  81.903us  cuDeviceGetAttribute
                    0.02%  111.61us         1  111.61us  111.61us  111.61us  cuDeviceTotalMem
                    0.02%  108.37us         1  108.37us  108.37us  108.37us  cudaFree
                    0.01%  40.336us         1  40.336us  40.336us  40.336us  cuDeviceGetName
                    0.01%  36.114us         2  18.057us  7.5010us  28.613us  cudaLaunchKernel
                    0.00%  20.045us         4  5.0110us  1.6540us  13.827us  cudaEventRecord
                    0.00%  13.738us         1  13.738us  13.738us  13.738us  cudaMemset
                    0.00%  5.2500us         1  5.2500us  5.2500us  5.2500us  cuDeviceGetPCIBusId
                    0.00%  2.3930us         2  1.1960us  1.1320us  1.2610us  cudaEventElapsedTime
                    0.00%  2.0710us         3     690ns     133ns  1.3870us  cuDeviceGetCount
                    0.00%  1.8100us         8     226ns     121ns     361ns  cudaGetLastError
                    0.00%  1.5130us         2     756ns     330ns  1.1830us  cudaEventDestroy
                    0.00%     800ns         2     400ns     188ns     612ns  cuDeviceGet
                    0.00%     225ns         1     225ns     225ns     225ns  cuDeviceGetUuid

#+end_example

*** nvvp
HtoD: 29.794MB in 2.27449ms,
DtoH: 71.305MB in 5.45703ms
*** Runs
|      | Cuda event time memcpy (ms) | Profiler time H2D (ms) | CPU execution time (s) |
|------+-----------------------------+------------------------+------------------------|
|    1 |                     2.32048 |                 2.2745 |                52.1475 |
|    2 |                     2.32906 |                 2.2794 |             53.2673507 |
|    3 |                      2.3192 |                 2.2740 |             52.4127731 |
|------+-----------------------------+------------------------+------------------------|
| Mean |                   2.3229133 |              2.2759667 |              52.609208 |
#+TBLFM: @5$4=vmean(@2$4..@4$4)::@5$3=vmean(@2$3..@4$3)::@5$2=vmean(@2$2..@4$2)

** config 2
*** Console output
#+begin_example
   Moving Window strategy
   Double precision
   Image size 4096x4096
   GCF size 128x128
   1 polarizations
   1280000 visibilities
   Subgrid: 1/8



Computing on GPU...
==6264== NVPROF is profiling process 6264, command: ../grid
memcpy time: 4.44154 ms.
Processed 1280000 complex points in 3534.27 ms.
47.4701 Gflops
Computing on CPU...
CPU execution time: 597880 ms.
Checking results against CPU:
==6264== Generated result file: /home/arunkmv/Projects/gpu-gridding-benchmark/SKA-gpu-grid/profiling/config_2.nvvp
======== Profiling result:
            Type  Time(%)      Time     Calls       Avg       Min       Max  Name
 GPU activities:   99.22%  3.53430s         1  3.53430s  3.53430s  3.53430s  void grid_kernel_window<int=128, double2, double2>(double2*, int2*, double2*, unsigned long, int, double2*)
                    0.62%  22.195ms         1  22.195ms  22.195ms  22.195ms  [CUDA memcpy DtoH]
                    0.12%  4.3965ms         3  1.4655ms  1.2795ms  1.5585ms  [CUDA memcpy HtoD]
                    0.03%  1.1454ms         1  1.1454ms  1.1454ms  1.1454ms  void vis2ints<double2>(double2*, int2*, int)
                    0.00%  1.1840us         1  1.1840us  1.1840us  1.1840us  [CUDA memset]
      API calls:   94.62%  3.53792s         2  1.76896s  5.9480us  3.53792s  cudaEventSynchronize
                    3.49%  130.41ms         2  65.204ms     829ns  130.41ms  cudaEventCreate
                    1.00%  37.401ms         4  9.3504ms  824.07us  34.821ms  cudaHostRegister
                    0.71%  26.645ms         4  6.6613ms  1.3001ms  22.210ms  cudaMemcpy
                    0.13%  4.7071ms         4  1.1768ms  373.65us  3.5384ms  cudaHostUnregister
                    0.02%  705.63us         5  141.13us  101.41us  293.80us  cudaMalloc
                    0.01%  537.64us        97  5.5420us     498ns  227.62us  cuDeviceGetAttribute
                    0.01%  414.37us         1  414.37us  414.37us  414.37us  cuDeviceTotalMem
                    0.01%  248.66us         1  248.66us  248.66us  248.66us  cudaFree
                    0.00%  103.79us         1  103.79us  103.79us  103.79us  cuDeviceGetName
                    0.00%  29.637us         2  14.818us  5.1060us  24.531us  cudaLaunchKernel
                    0.00%  14.409us         4  3.6020us  1.1570us  9.2200us  cudaEventRecord
                    0.00%  10.823us         1  10.823us  10.823us  10.823us  cudaMemset
                    0.00%  5.3900us         1  5.3900us  5.3900us  5.3900us  cuDeviceGetPCIBusId
                    0.00%  4.9160us         3  1.6380us     463ns  3.6280us  cuDeviceGetCount
                    0.00%  2.7820us         2  1.3910us     582ns  2.2000us  cuDeviceGet
                    0.00%  2.6730us         2  1.3360us  1.1330us  1.5400us  cudaEventElapsedTime
                    0.00%  1.7190us         2     859ns     451ns  1.2680us  cudaEventDestroy
                    0.00%  1.7040us         8     213ns      77ns     500ns  cudaGetLastError
                    0.00%     798ns         1     798ns     798ns     798ns  cuDeviceGetUuid

#+end_example

*** nvvp
HtoD: 57.737MB in 4.39648ms,
DtoH: 285.217MB in 22.19457ms

*** Runs
|      | Cuda event time memcpy (ms) | Profiler time H2D (ms) | CPU execution time (s) |
|------+-----------------------------+------------------------+------------------------|
|    1 |                     4.44154 |                 4.3965 |                597.880 |
|    2 |                      4.4455 |                 4.4014 |            395.8547549 |
|    3 |                      4.4399 |                 4.3936 |            576.6556793 |
|------+-----------------------------+------------------------+------------------------|
| Mean |                   4.4423133 |              4.3971667 |              523.46348 |
#+TBLFM: @5$4=vmean(@2$4..@4$4)::@5$3=vmean(@2$3..@4$3)::@5$2=vmean(@2$2..@4$2)

** config 3
*** Console output
#+begin_example
   Moving Window strategy
   Double precision
   Image size 8192x8192
   GCF size 128x128
   1 polarizations
   1600000 visibilities
   Subgrid: 1/8



Computing on GPU...
==6426== NVPROF is profiling process 6426, command: ../grid
memcpy time: 5.22499 ms.
Processed 1600000 complex points in 5743.52 ms.
36.5133 Gflops
Computing on CPU...
CPU execution time: 1.61821e+06 ms.
Checking results against CPU:
==6426== Generated result file: /home/arunkmv/Projects/gpu-gridding-benchmark/SKA-gpu-grid/profiling/config_3.nvvp
======== Profiling result:
            Type  Time(%)      Time     Calls       Avg       Min       Max  Name
 GPU activities:   98.42%  5.74356s         1  5.74356s  5.74356s  5.74356s  void grid_kernel_window<int=128, double2, double2>(double2*, int2*, double2*, unsigned long, int, double2*)
                    1.46%  85.383ms         1  85.383ms  85.383ms  85.383ms  [CUDA memcpy DtoH]
                    0.09%  5.1811ms         3  1.7270ms  1.2789ms  1.9561ms  [CUDA memcpy HtoD]
                    0.02%  1.4333ms         1  1.4333ms  1.4333ms  1.4333ms  void vis2ints<double2>(double2*, int2*, int)
                    0.00%  1.1840us         1  1.1840us  1.1840us  1.1840us  [CUDA memset]
      API calls:   94.16%  5.75437s         2  2.87718s  6.0660us  5.75436s  cudaEventSynchronize
                    2.28%  139.62ms         4  34.904ms  821.53us  136.77ms  cudaHostRegister
                    1.79%  109.30ms         2  54.651ms     661ns  109.30ms  cudaEventCreate
                    1.48%  90.618ms         4  22.655ms  1.2992ms  85.399ms  cudaMemcpy
                    0.24%  14.798ms         4  3.6995ms  409.29us  13.439ms  cudaHostUnregister
                    0.02%  1.2032ms         5  240.63us  97.503us  770.00us  cudaMalloc
                    0.01%  753.03us         1  753.03us  753.03us  753.03us  cudaFree
                    0.00%  154.05us        97  1.5880us     101ns  67.886us  cuDeviceGetAttribute
                    0.00%  94.857us         1  94.857us  94.857us  94.857us  cuDeviceTotalMem
                    0.00%  38.185us         1  38.185us  38.185us  38.185us  cuDeviceGetName
                    0.00%  28.270us         2  14.135us  5.0870us  23.183us  cudaLaunchKernel
                    0.00%  13.133us         4  3.2830us  1.2020us  8.5250us  cudaEventRecord
                    0.00%  10.628us         1  10.628us  10.628us  10.628us  cudaMemset
                    0.00%  5.0940us         1  5.0940us  5.0940us  5.0940us  cuDeviceGetPCIBusId
                    0.00%  3.2540us         2  1.6270us  1.0860us  2.1680us  cudaEventElapsedTime
                    0.00%  1.8940us         8     236ns      78ns     487ns  cudaGetLastError
                    0.00%  1.8460us         3     615ns     105ns  1.5980us  cuDeviceGetCount
                    0.00%  1.4820us         2     741ns     324ns  1.1580us  cudaEventDestroy
                    0.00%     632ns         2     316ns     121ns     511ns  cuDeviceGet
                    0.00%     169ns         1     169ns     169ns     169ns  cuDeviceGetUuid

#+end_example

*** nvvp
HtoD: 67.977MB in 5.18106ms,
DtoH: 1.107GB in 85.38267ms

*** Runs
|      | Cuda event time memcpy (ms) | Profiler time H2D (ms) | CPU execution time (s) |
|------+-----------------------------+------------------------+------------------------|
|    1 |                     5.22499 |                 5.1811 |               1618.210 |
|    2 |                     5.24016 |                 5.1962 |            1642.962911 |
|    3 |                        5.34 |                 5.2941 |            1626.662194 |
|------+-----------------------------+------------------------+------------------------|
| Mean |                   5.2683833 |                 5.2238 |              1629.2784 |
#+TBLFM: @5$4=vmean(@2$4..@4$4)::@5$3=vmean(@2$3..@4$3)::@5$2=vmean(@2$2..@4$2)

** config 4
*** Console output
#+begin_example
   Moving Window strategy
   Double precision
   Image size 8192x8192
   GCF size 128x128
   1 polarizations
   5120000 visibilities
   Subgrid: 1/8



Computing on GPU...
==6619== NVPROF is profiling process 6619, command: ../grid
memcpy time: 13.8953 ms.
Processed 5120000 complex points in 14680.9 ms.
45.7115 Gflops
Computing on CPU...
CPU execution time: 5.30029e+06 ms.
Checking results against CPU:
==6619== Generated result file: /home/arunkmv/Projects/gpu-gridding-benchmark/SKA-gpu-grid/profiling/config_4.nvvp
======== Profiling result:
            Type  Time(%)      Time     Calls       Avg       Min       Max  Name
 GPU activities:   99.30%  14.6809s         1  14.6809s  14.6809s  14.6809s  void grid_kernel_window<int=128, double2, double2>(double2*, int2*, double2*, unsigned long, int, double2*)
                    0.58%  85.164ms         1  85.164ms  85.164ms  85.164ms  [CUDA memcpy DtoH]
                    0.09%  13.851ms         3  4.6171ms  1.2879ms  6.3419ms  [CUDA memcpy HtoD]
                    0.03%  4.5707ms         1  4.5707ms  4.5707ms  4.5707ms  void vis2ints<double2>(double2*, int2*, int)
                    0.00%  1.1840us         1  1.1840us  1.1840us  1.1840us  [CUDA memset]
      API calls:   97.54%  14.6951s         2  7.34756s  6.1370us  14.6951s  cudaEventSynchronize
                    0.94%  141.39ms         4  35.348ms  818.85us  134.95ms  cudaHostRegister
                    0.74%  111.06ms         2  55.532ms     608ns  111.06ms  cudaEventCreate
                    0.66%  99.072ms         4  24.768ms  1.3080ms  85.182ms  cudaMemcpy
                    0.11%  16.212ms         4  4.0530ms  415.35us  13.259ms  cudaHostUnregister
                    0.01%  1.2817ms         5  256.35us  96.943us  764.94us  cudaMalloc
                    0.01%  765.04us         1  765.04us  765.04us  765.04us  cudaFree
                    0.00%  153.07us        97  1.5780us     100ns  67.232us  cuDeviceGetAttribute
                    0.00%  92.618us         1  92.618us  92.618us  92.618us  cuDeviceTotalMem
                    0.00%  39.310us         1  39.310us  39.310us  39.310us  cuDeviceGetName
                    0.00%  29.346us         2  14.673us  5.1960us  24.150us  cudaLaunchKernel
                    0.00%  14.206us         4  3.5510us  1.2960us  9.2700us  cudaEventRecord
                    0.00%  11.102us         1  11.102us  11.102us  11.102us  cudaMemset
                    0.00%  5.3660us         1  5.3660us  5.3660us  5.3660us  cuDeviceGetPCIBusId
                    0.00%  3.2840us         2  1.6420us  1.2540us  2.0300us  cudaEventElapsedTime
                    0.00%  2.3320us         2  1.1660us     373ns  1.9590us  cudaEventDestroy
                    0.00%  1.6780us         3     559ns     102ns  1.4390us  cuDeviceGetCount
                    0.00%  1.6750us         8     209ns      75ns     378ns  cudaGetLastError
                    0.00%     580ns         2     290ns     110ns     470ns  cuDeviceGet
                    0.00%     222ns         1     222ns     222ns     222ns  cuDeviceGetUuid

#+end_example

*** nvvp
HtoD: 180.617MB in 13.85137ms,
DtoH: 1.107GB in 85.16434ms

*** Runs
|      | Cuda event time memcpy (ms) | Profiler time H2D (ms) | CPU execution time (s) |
|------+-----------------------------+------------------------+------------------------|
|    1 |                     13.8953 |                 13.851 |               5300.290 |
|    2 |                     13.8866 |                 13.838 |            5263.634601 |
|    3 |                     13.8023 |                 13.756 |             5136.96921 |
|------+-----------------------------+------------------------+------------------------|
| Mean |                     13.8614 |                 13.815 |              5233.6313 |
#+TBLFM: @5$4=vmean(@2$4..@4$4)::@5$3=vmean(@2$3..@4$3)::@5$2=vmean(@2$2..@4$2)

** config 5
*** Console output
#+begin_example
   Moving Window strategy
   Double precision
   Image size 8196x8196
   GCF size 128x128
   1 polarizations
   10240000 visibilities
   Subgrid: 1/8



Computing on GPU...
==6969== NVPROF is profiling process 6969, command: ../grid
memcpy time: 26.3756 ms.
Processed 10240000 complex points in 27266 ms.
49.2254 Gflops
Computing on CPU...
CPU execution time: 2.41022e+06 ms.
Checking results against CPU:
==6969== Generated result file: /home/arunkmv/Projects/gpu-gridding-benchmark/SKA-gpu-grid/profiling/config_5.nvvp
======== Profiling result:
            Type  Time(%)      Time     Calls       Avg       Min       Max  Name
 GPU activities:   99.56%  27.2663s         1  27.2663s  27.2663s  27.2663s  void grid_kernel_window<int=128, double2, double2>(double2*, int2*, double2*, unsigned long, int, double2*)
                    0.31%  85.053ms         1  85.053ms  85.053ms  85.053ms  [CUDA memcpy DtoH]
                    0.10%  26.331ms         3  8.7770ms  1.2776ms  12.529ms  [CUDA memcpy HtoD]
                    0.03%  9.1386ms         1  9.1386ms  9.1386ms  9.1386ms  void vis2ints<double2>(double2*, int2*, int)
                    0.00%  1.1840us         1  1.1840us  1.1840us  1.1840us  [CUDA memset]
      API calls:   98.58%  27.2847s         2  13.6424s  5.9780us  27.2847s  cudaEventSynchronize
                    0.54%  148.77ms         4  37.192ms  807.32us  137.18ms  cudaHostRegister
                    0.40%  111.44ms         4  27.861ms  1.2985ms  85.073ms  cudaMemcpy
                    0.40%  111.24ms         2  55.622ms     646ns  111.24ms  cudaEventCreate
                    0.07%  18.543ms         4  4.6358ms  418.15us  13.322ms  cudaHostUnregister
                    0.01%  1.4062ms         5  281.23us  98.979us  760.16us  cudaMalloc
                    0.00%  767.84us         1  767.84us  767.84us  767.84us  cudaFree
                    0.00%  152.90us        97  1.5760us      98ns  67.266us  cuDeviceGetAttribute
                    0.00%  94.557us         1  94.557us  94.557us  94.557us  cuDeviceTotalMem
                    0.00%  38.287us         1  38.287us  38.287us  38.287us  cuDeviceGetName
                    0.00%  29.754us         2  14.877us  5.4810us  24.273us  cudaLaunchKernel
                    0.00%  13.819us         4  3.4540us  1.3100us  8.8550us  cudaEventRecord
                    0.00%  10.582us         1  10.582us  10.582us  10.582us  cudaMemset
                    0.00%  5.4240us         1  5.4240us  5.4240us  5.4240us  cuDeviceGetPCIBusId
                    0.00%  4.1160us         2  2.0580us  1.3640us  2.7520us  cudaEventElapsedTime
                    0.00%  1.8420us         2     921ns     370ns  1.4720us  cudaEventDestroy
                    0.00%  1.8320us         8     229ns      87ns     419ns  cudaGetLastError
                    0.00%  1.4040us         3     468ns      96ns  1.1680us  cuDeviceGetCount
                    0.00%     648ns         2     324ns     112ns     536ns  cuDeviceGet
                    0.00%     158ns         1     158ns     158ns     158ns  cuDeviceGetUuid

#+end_example

*** nvvp
HtoD: 344.457MB in 26.33108ms,
DtoH: 1.108GB in 85.05265ms

*** Runs
|      | Cuda event time memcpy (ms) | Profiler time H2D (ms) | CPU execution time (s) |
|------+-----------------------------+------------------------+------------------------|
|    1 |                     26.3756 |                 26.331 |               2410.220 |
|    2 |                      26.504 |                 26.458 |            2402.413644 |
|    3 |                             |                        |                        |
|------+-----------------------------+------------------------+------------------------|
| Mean |                     26.4398 |                26.3945 |              2406.3168 |
#+TBLFM: @5$4=vmean(@2$4..@4$4)::@5$3=vmean(@2$3..@4$3)::@5$2=vmean(@2$2..@4$2)


* Results
** H2D data transfer analysis

CUDA event time includes both CPU overhead as well as PCIe transfer latency, while the profiler time includes only the latency at the GPU side (PCIe only). Hence profiler time can be considered as latency and CUDA event time as latency + overhead.

| Experiment     | Data sent (MB) | CUDA event time (ms) (L + o) | Profiler time (ms) (L) |    overhead (o) (ms) | Latency / Byte (ps) | PCIe throughput (GB/s) |
|----------------+----------------+------------------------------+------------------------+----------------------+---------------------+------------------------|
| Default config |         13.849 |                      1.11714 |              1.0737733 |  0.04336669999999998 |   77.53435627121092 |      12.89750825430284 |
| config 1       |         29.794 |                    2.3229133 |              2.2759667 |  0.04694660000000006 |   76.39010203396657 |     13.090701195232777 |
| config 2       |         57.737 |                    4.4423133 |              4.3971667 |   0.0451466000000007 |   76.15855863657619 |     13.130500601671528 |
| config 3       |         67.977 |                    5.2683833 |                 5.2238 | 0.044583300000000214 |   76.84658046103829 |     13.012940771086184 |
| config 4       |        180.617 |                      13.8614 |                 13.815 |  0.04640000000000022 |   76.48781676143442 |     13.073977560622511 |
| config 5       |        344.457 |                      26.4398 |                26.3945 | 0.045300000000001006 |   76.62640039250182 |     13.050332455625224 |
|----------------+----------------+------------------------------+------------------------+----------------------+---------------------+------------------------|
| Mean           |                |                              |                        |          0.045290533 |           76.673969 |              13.042660 |
#+TBLFM: $5='(- $3 $4);N::$6='(/ (* $4 1000) $2);N::$7='(/ $2 $4);N::@8$5=vmean(@2$5..@7$5)::@8$6=vmean(@2$6..@7$6)::@8$7=vmean(@2$7..@7$7)

** CPU execution times

| Experiment     | Data processed (B) (g) | CPU execution time (s) (t) |                ps |        t/g (ns/B)  |
|----------------+------------------------+----------------------------+-------------------+--------------------|
| Default config |               13848576 |                  7.0214994 |   7021499400000.0 |  507.0195953721162 |
| config 1       |               29794304 |                  52.609208 |  52609208000000.0 | 1765.7471710028872 |
| config 2       |               57737216 |                  523.46348 | 523463480000000.0 |  9066.309674508726 |
| config 3       |               67977216 |                  1629.2784 |     1.6292784e+15 |  23968.00716287057 |
| config 4       |              180617216 |                  5233.6313 |     5.2336313e+15 | 28976.370115238627 |
#+TBLFM: $4='(* $3 1e+12);N::$5='(* (/ $3 $2) 1e+9);N

Power regression analysis: $t = 3.645632e-7 * g^{2.7143}$

$\beta = 2.7143$

** Calculation of A:
Peak double precision GFLOPS of GPU (From profiler) = 114.24
Peak double precision GFLOPS of CPU (from [[https://setiathome.berkeley.edu/cpu_list.php][here]]) = 4.11

A = 114.43/4.11 = 27.795620438

** Unified LogCA parameters

| Parameter                        |       Value | Unit |
|----------------------------------+-------------+------|
| Latency                          |   76.416755 | ps   |
| Overhead                         |     4.53e+7 | ps   |
| Computational index              | 3.645632e-7 | ps/B |
| Acceleration                     |        27.8 | ---  |
| Complexity power factor          |      2.7143 | ---  |
| Is latency granularity dependant |        True | ---  |
